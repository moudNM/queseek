<!DOCTYPE html>

<!--[if lt IE 7]>
<html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>
<html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>
<html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js"> <!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Queseek</title>
    <link rel="shortcut icon" type="image/png" href="{{ url_for('static', filename='images/icons/favicon.ico')}}"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Seekers Of Lost Items. Builders of community spirit."/>
    <meta name="keywords" content="queseek, lost and found, community spirit"/>
    <meta name="author" content="Queseek"/>

    <!--Fonts Used-->
    <link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css?family=Open+Sans:400,700,300'>
    <link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css?family=Oswald'>

    <!-- Bootstrap  --><!--Affects padding and search bar-->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.css')}}">
    <!--affects tables-->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/list.css')}}">
    <!--affects everything else-->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css')}}">

    <script src="{{url_for('static', filename='js/table.js')}}"></script>

    <!--for faq-->
    <script src="{{url_for('static', filename='js/modernizr.js')}}"></script>

    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700' rel='stylesheet' type='text/css'>


</head>

<body>

<script>
    $(document).ready(function () {
  getPagination('#datatable');
  $('#maxRows option:last').prop('selected', true).trigger('change');
});

function getPagination(table) {

  $('#maxRows').on('change', function(e) {
    $('.pagination').html(''); // reset pagination
    var trnum = 0; // reset tr counter
    var maxRows = parseInt($(this).val()); // get Max Rows from select option
    var totalRows = $(table + ' tbody tr').length; // numbers of rows
    $(table + ' tr:gt(0)').each(function() { // each TR in  table and not the header
      trnum++; // Start Counter
      if (trnum > maxRows) { // if tr number gt maxRows

        $(this).hide(); // fade it out
      }
      if (trnum <= maxRows) {
        $(this).show();
      } // else fade in Important in case if it ..
    }); //  was fade out to fade it in
    if (totalRows > maxRows) { // if tr total rows gt max rows option
      var pagenum = Math.ceil(totalRows / maxRows); // ceil total(rows/maxrows) to get ..
      //	numbers of pages
      for (var i = 1; i <= pagenum;) { // for each page append pagination li
        $('.pagination').append('<li class"wp" data-page="' + i + '">\
<span>' + i++ + '<span class="sr-only">(current)</span></span>\
</li>').show();
      } // end for i
    } // end if row count > max rows
    $('.pagination li:first-child').addClass('active'); // add active class to the first li
    $('.pagination li').on('click', function() { // on click each page
      var pageNum = $(this).attr('data-page'); // get it's number
      var trIndex = 0; // reset tr counter
      $('.pagination li').removeClass('active'); // remove active class from all li
      $(this).addClass('active'); // add active class to the clicked
      $(table + ' tr:gt(0)').each(function() { // each tr in table not the header
        trIndex++; // tr index counter
        // if tr index gt maxRows*pageNum or lt maxRows*pageNum-maxRows fade if out
        if (trIndex > (maxRows * pageNum) || trIndex <= ((maxRows * pageNum) - maxRows)) {
          $(this).hide();
        } else {
          $(this).show();
        } //else fade in
      }); // end of for each tr in table
    }); // end of on click pagination list


  });

  // end of on select change



  // END OF PAGINATION
}


</script>

<div id="topbar-wrapper">

    {% include "base/topbar.html" %}

    {% if current_user.is_anonymous %}
    <div class="topbar-cover2">
        <div class="desc">
            <div class="row">

                <!--<div class="desc2 animate-box">-->
                <div class="col-sm-1 col-sm-push-3 col-md-6 col-md-push-3">


                    <!--<div class="col-sm-7 col-sm-push-1 col-md-7 col-md-push-1">-->
                    <h2>Always losing your belongings?</h2>
                    <h2>Need help running errands?</h2>
                    <h2>Love helping others out?</h2>
                    <!--<h3>Come join our community of seekers!</h3>-->
                    <span class="join">Come join our community of seekers!</span>
                    <button class="signupbutton">SIGN UP</button>
                    <!-- <p><a class="btn btn-primary btn-lg" href="#">Get Started</a></p> -->


                </div>

            </div>

        </div>
    </div>

    {% else %}
    <div class="topbar-cover2">
        <div class="desc">

            <h1>PROFILE</h1>
            <section class="cd-faq">

                <div class="cd-faq-categories">

                    {% if page == 'avatars' %}
                    <a href="{{url_for('profile_general')}}">General Details</a>
                    <a class="active" href="{{url_for('profile_avatars')}}">Avatars</a>
                    <a href="{{url_for('profile_badges')}}">Badges</a>

                    {% elif page == 'badges' %}
                    <a href="{{url_for('profile_general')}}">General Details</a>
                    <a href="{{url_for('profile_avatars')}}">Avatars</a>
                    <a class="active" href="{{url_for('profile_badges')}}">Badges</a>

                    {% else %}
                    <a class="active" href="{{url_for('profile_general')}}">General Details</a>
                    <a href="{{url_for('profile_avatars')}}">Avatars</a>
                    <a href="{{url_for('profile_badges')}}">Badges</a>
                    {% endif %}

                </div>
                <!--<div class="cd-faq-items">-->
                <ul class="cd-faq-group">

                    {% if page == 'avatars' %}
                        <div class="cd-faq-title"><h2>Avatars</h2></div>

                        <div class="profile">

                            <!--Username-->
                            <div class="detailheader">{{ user.username }}</div>
                            <br>

                            <!--Level-->
                            <div class="formlabelformat">Coins Balance:</div>
                            <div class="formlabelformat">{{ userprofile[0].coinsBalance }}</div>
                            <br>

                            <!--&lt;!&ndash;Avatar Stage &ndash;&gt;-->
                            <!--<div class="formlabelformat">Avatar Stage:</div>-->
                            <!--<div class="formlabelformat">{{ 1 }}</div>-->
                            <!--<br>-->

                            <!--Current Avatar-->
                            <div class="formlabelformat">Current Avatar:</div>
                            <div class="formlabelformat">{{ userprofile[1].name }}</div>
                            <br>
                        </div>

                        <div class="profile">
                            <img src="{{ url_for('static', filename='images/avatars/'+userprofile[1].avatarId+'.png')}}"
                                 width="256"
                                 height="256">
                        </div>

                        <div class="grid-container">

                            {% for row in avatars %}
                            <div class="item">
                                <img src="{{ url_for('static', filename='images/avatars/'+row.avatarId+'.png')}}"
                                     width="192"
                                     height="192">
                                <div class="avatartext">{{ row.name }}</div>

                                <!--if unlocked-->
                                {% if row.avatarId in user_avatars %}
                                <div class="avatardesctext"> Unlocked</div>
                                <form action="{{ url_for('profile_avatars_update', avatarId=row.avatarId) }}"
                                      method="post">
                                    <button class="signupbutton" type="submit" value=""/>
                                    Use
                                    </button>
                                </form>

                                <!--if not unlocked-->
                                {% else %}
                                <div class="avatardesctext">{{ row.coinsRequired|string + ' coins' }}</div>
                                <form action="{{ url_for('profile_avatars_unlock', avatarId=row.avatarId) }}" method="post">
                                    <button class="signupbutton" type="submit" value=""/>
                                    Unlock
                                    </button>
                                </form>
                                {% endif %}


                            </div>
                            {% endfor %}

                        </div>


                        {% elif page == 'badges' %}

                        <div class="cd-faq-title"><h2>Badges</h2></div>

                        {% else %}
                        <div class="cd-faq-title"><h2>General Details</h2></div>

                        <!--<div class="">-->
                        <div class="profile">

                            <!--Username-->
                            <div class="detailheader">{{ user.username }}</div>
                            <br>

                            <!--Level-->
                            <div class="formlabelformat">Current Level:</div>
                            <div class="formlabelformat">{{ userprofile.level }}</div>
                            <br>

                            <!--Coins to next Level-->
                            <div class="formlabelformat">Coins to Next Level:</div>
                            <div class="formlabelformat">{{ userprofile.coinsToNext }}</div>
                            <br>

                            <!--Coins Balance-->
                            <div class="formlabelformat">Coins Balance:</div>
                            <div class="formlabelformat">{{ userprofile.coinsBalance }}</div>
                            <br>

                            <!--Total Coins Collected-->
                            <div class="formlabelformat">Coins Collected:</div>
                            <div class="formlabelformat">{{ userprofile.coinsCollected }}</div>
                            <br>

                        </div>


                        {% endif %}

                </ul>
                

                <!--Your Quests-->

                <a href="#0" class="cd-close-panel">Close</a>
            </section> <!-- cd-faq -->


        </div>
    </div>
    {% endif %}
    <!--</div>-->

</div>
<!-- END topbar-page -->

</div>
<!-- END topbar-wrapper -->

</body>
</html>